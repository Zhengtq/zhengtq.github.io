<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>&lt; Linux &gt; A Safe Way to Use Deletion Command In Linux. - Billy&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Billy&#039;s Blog"><meta name="msapplication-TileImage" content="/img/1.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Billy&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="What is saferm?A safe deletion script to prevent you from wrongly deleting important files in your Linux system."><meta property="og:type" content="blog"><meta property="og:title" content="&lt; Linux &gt; A Safe Way to Use Deletion Command In Linux."><meta property="og:url" content="https://zhengtq.github.io/2019/10/19/saferm/"><meta property="og:site_name" content="Billy&#039;s Blog"><meta property="og:description" content="What is saferm?A safe deletion script to prevent you from wrongly deleting important files in your Linux system."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zhengtq.github.io/img/og_image.png"><meta property="article:published_time" content="2019-10-19T03:45:44.000Z"><meta property="article:modified_time" content="2021-03-12T07:11:36.778Z"><meta property="article:author" content="Billy"><meta property="article:tag" content="Linux"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhengtq.github.io/2019/10/19/saferm/"},"headline":"Billy's Blog","image":["https://zhengtq.github.io/img/og_image.png"],"datePublished":"2019-10-19T03:45:44.000Z","dateModified":"2021-03-12T07:11:36.778Z","author":{"@type":"Person","name":"Billy"},"description":"What is saferm?A safe deletion script to prevent you from wrongly deleting important files in your Linux system."}</script><link rel="canonical" href="https://zhengtq.github.io/2019/10/19/saferm/"><link rel="icon" href="/img/1.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Billy&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Zhengtq"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-10-19T03:45:44.000Z" title="10/19/2019, 11:45:44 AM">2019-10-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-03-12T07:11:36.778Z" title="3/12/2021, 3:11:36 PM">2021-03-12</time></span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a></span><span class="level-item">3 分钟 read (About 397 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">&lt; Linux &gt; A Safe Way to Use Deletion Command In Linux.</h1><div class="content"><h1 id="What-is-saferm"><a href="#What-is-saferm" class="headerlink" title="What is saferm?"></a>What is saferm?</h1><p>A safe deletion script to prevent you from wrongly deleting important files in your Linux system.<br><span id="more"></span></p>
<h1 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works?"></a>How it works?</h1><p>Everytime when you delete a file, it actually move the file to a hidden folder named .saferm_xxx_yyy in the same location where  xxx means the timestamp when you delete, yyy is a random number. </p>
<p>This hidden folder will keep for some time(which is depended on your appointment) before it is truly deleted. So you can restore your deleted files within the keeping time of the file.</p>
<h1 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it?"></a>How to use it?</h1><p>After you clone this <a target="_blank" rel="noopener" href="https://github.com/Zhengtq/saferm">project</a>, there are two ways to use it:</p>
<h3 id="First-way-If-you-are-a-root-user"><a href="#First-way-If-you-are-a-root-user" class="headerlink" title="First way(If you are a root user)"></a>First way(If you are a root user)</h3><p>To put this two scripts in your /usr/bin/ folder, then to alias rm=’saferm’ to use it.</p>
<h3 id="Second-way"><a href="#Second-way" class="headerlink" title="Second way"></a>Second way</h3><p>To put the two scripts in wherever you want, then to add the path to your PATH system environment in your .bashrc file. Finally to alias rm=’saferm’ to use it.</p>
<h3 id="The-useful-command"><a href="#The-useful-command" class="headerlink" title="The useful command"></a>The useful command</h3><p>To delete a file.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm xxx</span><br></pre></td></tr></table></figure><br>The file xxx will keep for a relatively long time(which is depended on your appointment) .</p>
<p>To delete a file right now.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -now yyy</span><br></pre></td></tr></table></figure><br>The file yyy will keep in a relatively short time(Which depends on your appointment).</p>
<p>For safety concerns, to use <em> to delete is restricted. If you want to use ‘rm </em> ‘ to delete everything in your folder, you can use the following command.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -all *</span><br></pre></td></tr></table></figure></p>
<h1 id="Personal-Customization"><a href="#Personal-Customization" class="headerlink" title="Personal Customization"></a>Personal Customization</h1><p>You can decide how long you want to the deleted file to be kept. You can edit the ‘saferm’ file, then modify the ‘KEEP_TIME_LONG’ variable to the time(by second) you want to set.<br>If you want to delete the file right now, you can set the variable ‘KEEP_TIME_INSTANT’ in the script ‘saferm’ to determine the short time you want to keep.</p>
<h1 id="Check-the-deletion-history"><a href="#Check-the-deletion-history" class="headerlink" title="Check the deletion history"></a>Check the deletion history</h1><p>A ‘.my_deletion.txt’ text will be established once you firstly use saferm. And the location of the text is in your home directory, so you can locate this text by ‘ls ~/.my_deletion.txt’.</p>
<p>Everytime when you delete a file, a recored would be written in this text. And once that file is finally being deleted, the corresponded history will be removed also.</p>
<h1 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h1><p><a target="_blank" rel="noopener" href="https://github.com/Zhengtq/saferm">Github</a> </p>
</div><div class="article-licensing box"><div class="licensing-title"><p>&lt; Linux &gt; A Safe Way to Use Deletion Command In Linux.</p><p><a href="https://zhengtq.github.io/2019/10/19/saferm/">https://zhengtq.github.io/2019/10/19/saferm/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Billy</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2019-10-19</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-03-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Linux/">Linux</a></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/01/17/advAS/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">&lt; Antispoofing &gt;　如何科学的攻破活体识别系统</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/07/27/linux-multi-thread/"><span class="level-item">&lt; Linux &gt; A simple way to run program with mult-thread</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://zhengtq.github.io/2019/10/19/saferm/';
            this.page.identifier = '2019/10/19/saferm/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'Billy' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Billy&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 Billy</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Zhengtq"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>